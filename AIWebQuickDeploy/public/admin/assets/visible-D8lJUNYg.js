
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as T}from"./index.vue_vue_type_script_setup_true_lang-BhIKqf2a.js";import{d as $,m as E,r as v,a as I,p as o,g as h,c as y,b as e,w as l,h as r,F as M,s as S,i as x,J as w,e as s,G as V,j as A,_ as G,k}from"./index-6QRvoxq4.js";import{a as K}from"./config-DBls5jtO.js";const J=s("div",{class:"flex items-center gap-4"},"插件应用基础配置",-1),L=s("div",{class:"text-sm/6"},[s("div",null," 插件基础配置，包括联网插件地址、联网插件 Key、隐藏插件、插件优先显示等。 "),s("div",null,[r(" 联网插件已支持多种方式： "),s("a",{href:"https://bigmodel.cn",target:"_blank"},"智谱 web-search-pro"),r("、 "),s("a",{href:"https://open.bochaai.com",target:"_blank"},"博查 web-search"),r("、 "),s("a",{href:"https://app.tavily.com/home",target:"_blank"},"Tavily"),r(" 需自行登录以上网站，获取对应的 Key（多个Key用英文逗号隔开）。 ")])],-1),W=s("div",{style:{width:"250px"}},[s("p",null,"开启后，将隐藏插件功能")],-1),z=s("div",{style:{width:"250px"}},[s("p",null,"开启后，对话页默认优先显示插件")],-1),D=$({__name:"visible",setup(Q){const a=E({pluginUrl:"",pluginKey:"",siteRobotName:"",pluginFirst:"1",isHidePlugin:"0"}),U=v({pluginUrl:[{required:!0,trigger:"blur",message:"请填写插件地址"}],pluginKey:[{required:!0,trigger:"blur",message:"请填写插件key"}]}),C=[{value:"https://open.bigmodel.cn/api/paas/v4/tools",label:"【智谱 web-search-pro】"},{value:"https://api.bochaai.com/v1/web-search",label:"【博查 web-search】"},{value:"https://api.tavily.com/search",label:"【Tavily 1000 次/月（免费）】"}],d=v();async function _(){const i=await K.queryConfig({keys:["pluginUrl","pluginKey","pluginFirst","isHidePlugin"]});Object.assign(a,i.data)}function F(){var i;(i=d.value)==null||i.validate(async t=>{if(t){try{await K.setConfig({settings:H(a)}),V.success("变更配置信息成功")}catch{}_()}else V.error("请填写完整信息")})}function H(i){return Object.keys(i).map(t=>({configKey:t,configVal:i[t]}))}return I(()=>{_()}),(i,t)=>{const m=A,P=G,q=T,B=o("el-option"),N=o("el-select"),u=o("el-form-item"),c=o("el-col"),p=o("el-row"),j=o("el-input"),f=o("el-switch"),g=o("el-icon"),b=o("el-tooltip"),O=o("el-form"),R=o("el-card");return h(),y("div",null,[e(q,null,{title:l(()=>[J]),content:l(()=>[L]),default:l(()=>[e(P,{outline:"",onClick:F},{default:l(()=>[e(m,{name:"i-ri:file-text-line"}),r(" 保存设置 ")]),_:1})]),_:1}),e(R,{style:{margin:"20px"}},{default:l(()=>[e(O,{ref_key:"formRef",ref:d,rules:U.value,model:a,"label-width":"150px"},{default:l(()=>[e(p,null,{default:l(()=>[e(c,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"联网插件地址",prop:"pluginUrl"},{default:l(()=>[e(N,{modelValue:a.pluginUrl,"onUpdate:modelValue":t[0]||(t[0]=n=>a.pluginUrl=n),placeholder:"请选择或输入联网搜索使用的地址",clearable:"",filterable:"","allow-create":""},{default:l(()=>[(h(),y(M,null,S(C,n=>e(B,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(c,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"联网插件 Key",prop:"pluginKey"},{default:l(()=>[e(j,{modelValue:a.pluginKey,"onUpdate:modelValue":t[1]||(t[1]=n=>a.pluginKey=n),placeholder:"插件 Key",clearable:"",password:"","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(c,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"隐藏插件",prop:"isHidePlugin"},{default:l(()=>[e(f,{modelValue:a.isHidePlugin,"onUpdate:modelValue":t[2]||(t[2]=n=>a.isHidePlugin=n),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(b,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[W]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(x(w))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(c,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"插件优先显示",prop:"pluginFirst"},{default:l(()=>[e(f,{modelValue:a.pluginFirst,"onUpdate:modelValue":t[3]||(t[3]=n=>a.pluginFirst=n),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(b,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[z]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(x(w))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof k=="function"&&k(D);export{D as default};
